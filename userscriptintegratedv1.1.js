// ==UserScript==
// @name         userscriptintegratedv1.1
// @namespace    https://gsfw.w3school.com
// @version      2024-06-24
// @description  go school and fuck the world
// @author       jui
// @match        https://*/*
// @grant        GM_xmlhttpRequest
// ==/UserScript==
'use strict';

(function() {
    const observer = new MutationObserver(() => {
        // This function is called whenever a mutation occurs, but we do nothing here
        //alert("shh");
    });

    observer.observe(document.body, { childList: true, subtree: true });
})();


(function withinuni() {
    // Check the current URL to see which @match triggered the script
    if (window.location.href.startsWith("https://sellercentral.amazon.co.uk/home")) {
        function eu1() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral.amazon.co.uk/performance/dashboard";https://sellercentral.amazon.com/performance/notifications
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:700px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';

            // Your code here...
        };
        function eu2() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral.amazon.co.uk/performance/notifications";
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:700px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';

            // Your code here...
        };
        function eu3() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral.amazon.co.uk/messaging/inbox-v3?fi=responseNeeded&&&";https://sellercentral.amazon.com/performance/notifications
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:1100px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';
            // Your code here...
        };
        function eu4() {
            window.open("https://sellercentral.amazon.co.uk/inventory/ref=xx_invmgr_favb_xx","_blank");
        };


        eu1();eu2();eu3();eu4();

    } else if (window.location.href.startsWith("https://sellercentral-japan.amazon.com/home")) {
        (function() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral-japan.amazon.com/performance/dashboard";https://sellercentral.amazon.com/performance/notifications
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:700px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';

            // Your code here...
        })();
        (function() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral-japan.amazon.com/performance/notifications";
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:700px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';

            // Your code here...
        })();
        (function() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral-japan.amazon.com/messaging/inbox-v3?fi=responseNeeded&&&";https://sellercentral.amazon.com/performance/notifications
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:1100px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';
            // Your code here...
        })();
        (function() {
            window.open("https://sellercentral-japan.amazon.com/inventory/ref=xx_invmgr_favb_xx","_blank");
        })();


        // Do something specific for product pages
    }else if (window.location.href.startsWith("https://sellercentral.amazon.com/home")) {


        (function() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral.amazon.com/performance/dashboard";https://sellercentral.amazon.com/performance/notifications
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:700px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';

            // Your code here...
        })();
        (function() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral.amazon.com/performance/notifications";
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:700px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';

            // Your code here...
        })();
        (function() {
            'use strict';
            const cdiv = document.createElement("iframe");
            document.getElementById("sc-navbar-container").appendChild(cdiv);
            const j="www.baidu.com"
            cdiv.src="https://sellercentral.amazon.com/messaging/inbox-v3?fi=responseNeeded&&&";https://sellercentral.amazon.com/performance/notifications
            //cdiv.width="1800";
            //cdiv.height="1000";
            //cdiv.style.cssText = 'position:absolute;top:300px;left:300px;width:200px;height:200px;-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;display:none;';
            cdiv.style.cssText = 'width:1100px;height:1000px;-moz-border-radius:100px;border:6px dashed #ddd;-moz-box-shadow: 0px 0px 8px  #fff;resize: both';
            // Your code here...
        })();
        (function() {
            window.open("https://sellercentral.amazon.com/inventory/ref=xx_invmgr_favb_xx","_blank");
        })();



        // Do something specific for product pages
    }
    // ... add more conditions for other @match URLs
}

)();


(function(){
    if (window.location.href.startsWith("https://sellercentral.amazon.co.uk/abis/listing/edit")||window.location.href.startsWith("https://sellercentral.amazon.com/abis/listing/edit")||window.location.href.startsWith("https://sellercentral-japan.amazon.com/abis/listing/edit")){
        const styleSheet =`
.juibuttons{
background-color:green;}`
        const createcss=document.createElement("style");
        createcss.type="text/css";
        createcss.innerHTML=styleSheet;
        (document.head ||document.documentElement).appendChild(createcss);


        const cbtn=document.createElement("button");
        cbtn.className="juibuttons";
        cbtn.textContent="doreplace";
        cbtn.style.cssText = 'width:100px;height:40px;border:2px dashed #ddd;';
        cbtn.addEventListener("mouseover", () => {
            cbtn.style.backgroundColor = "rgba(255, 0, 0, 0.2)";
        });
        cbtn.addEventListener("mouseout", () => {
            cbtn.style.backgroundColor = ""; // Restore default color
        });
        document.getElementById("sc-navbar-container").appendChild(cbtn);

        const ctextarea = document.createElement("textarea");
        document.getElementById("sc-navbar-container").appendChild(ctextarea);
        ctextarea.style.cssText = 'font-size: 0.8rem; letter-spacing: 1px; width: 100px; height: 40px; border: 2px dashed #ddd;';
        //ctextarea.value=celements[0].textContent;



        cbtn.addEventListener("click", () => {

            const celements = [...document.querySelectorAll('.text-size-sm.text-secondary')];
            for (const a of celements) {
                a.textContent = a.textContent.replace(new RegExp(ctextarea.value, 'gi'), '');
                // csmallbtn.addEventListener("click", () => {navigator.clipboard.writeText(csmallbtn.parentElement.textContent)});
            };

        });


        const mbtn=document.createElement("button");
        mbtn.className="juibuttons";
        mbtn.textContent="createcopybutton";
        mbtn.style.cssText = 'width:100px;height:40px;border:2px dashed #ddd;';
        mbtn.addEventListener("mouseover", () => {
            mbtn.style.backgroundColor = "rgba(255, 0, 0, 0.2)";
        });
        mbtn.addEventListener("mouseout", () => {
            mbtn.style.backgroundColor = ""; // Restore default color
        });
        document.getElementById("sc-navbar-container").appendChild(mbtn);

        mbtn.addEventListener("click", jui);

        function jui(){

            const elements = [...document.querySelectorAll('.text-size-sm.text-secondary')];


            for (const element of elements) {

                const copyButton = document.createElement('button');
                copyButton.className="juibuttons";
                copyButton.textContent = "";
                copyButton.style.cssText = 'width:100px;height:40px;border:2px dashed #ddd;';
                copyButton.addEventListener("mouseover", () => {
                    copyButton.style.backgroundColor = "rgba(255, 0, 0, 0.2)";
                });
                copyButton.addEventListener("mouseout", () => {
                    copyButton.style.backgroundColor = ""; // Restore default color
                });
                copyButton.addEventListener("click",()=>{navigator.clipboard.writeText(copyButton.parentElement.textContent)});
                element.appendChild(copyButton);
            }
        }
    }
})();

(function(){
    if (window.location.href.startsWith("https://sellercentral.amazon.co.uk/performance/account/health/product-policies")||window.location.href.startsWith("https://sellercentral-japan.amazon.com/performance/account/health/product-policies")||window.location.href.startsWith("https://sellercentral.amazon.com/performance/account/health/product-policies")){
        const defaultBackgroundColor="rgba(221,221,221,1)";
        const openlinkbtn = document.createElement("button");
        document.getElementById("sc-navbar-container").appendChild(openlinkbtn);
        const ctextarea = document.createElement("textarea");
        document.getElementById("sc-navbar-container").appendChild(ctextarea);
        openlinkbtn.id="juibutton";
        openlinkbtn.textContent="retrievesku";
        openlinkbtn.style.cssText = 'width:100px;height:40px;border:2px dashed #ddd;';
        ctextarea.style.cssText = 'font-size: 0.8rem; letter-spacing: 1px; width: 100px; height: 40px; border: 2px dashed #ddd;';
        ctextarea.id="juictextarea";


        openlinkbtn.addEventListener("mouseover", () => {
            openlinkbtn.style.backgroundColor = "rgba(255, 0, 0, 0.2)";
        });
        openlinkbtn.addEventListener("mouseout", () => {
            openlinkbtn.style.backgroundColor = defaultBackgroundColor; // Restore default color
        });


        openlinkbtn.addEventListener("click", () => {
            ctextarea.value = "";

            const filteredSpans = [...document.querySelectorAll("span")].filter((span) => !span.hasAttribute("class") && span.textContent.includes("ASIN："));

            const asins = filteredSpans.map((filteredSpan) => {
                const replacedText = filteredSpan.textContent.replace(/ASIN：/gi, "");
                return replacedText;
            });
            /*
    ctextarea.value = asins.map((asin) => {

        const link = document.createElement("a");
        const newHref = `https://sellercentral.amazon.co.uk/inventory/?ref=sp_st_ahd_abp_edit&search:${asin.replace(/&amp;/g, "&")}`; // Replace &amp; with &
        link.href = newHref;
        link.textContent = asin;
        window.open(newHref,"_blank");

        return link.outerHTML;
    }).join("");
    */
            const results = [];
            for (const asin of asins) {
                let inventoryhref="";
                if (window.location.href.startsWith("https://sellercentral.amazon.co.uk/performance/account/health/product-policies")) {
                    inventoryhref="https://sellercentral.amazon.co.uk/inventory/?ref=sp_st_ahd_abp_edit&search:";
                }else if(window.location.href.startsWith("https://sellercentral-japan.amazon.com/performance/account/health/product-policies")){
                    inventoryhref="https://sellercentral-japan.amazon.com/inventory/?ref=sp_st_ahd_abp_edit&search:"
                }else if(window.location.href.startsWith("https://sellercentral.amazon.com/performance/account/health/product-policies")){
                    inventoryhref="https://sellercentral.amazon.com/inventory/?ref=sp_st_ahd_abp_edit&search:"
                };
                //alert(inventoryhref);
                const newHref = `${inventoryhref}${asin.replace(/&amp;/g, "&")}`;

                //const newHref = `https://sellercentral.amazon.co.uk/inventory/?ref=sp_st_ahd_abp_edit&search:${asin.replace(/&amp;/g, "&")}`;





                GM_xmlhttpRequest({
                    method: "GET",
                    url: newHref,
                    onload: function(response) {
                        /*
                  if (response.status === 200) {
        alert("GM_xmlhttpRequest successful!");
      } else {
        alert("GM_xmlhttpRequest failed:", response.status);
      };
*/
                        const parsedHTML = response.responseText;
                        const doc = new DOMParser().parseFromString(parsedHTML, "text/html"); // Assuming HTML

                        // Search for the target class element on the product page
                        const targetElements = doc.querySelectorAll(".a-link-normal.mt-link-content.mt-table-main");
                        //alert(targetElements);
                        // Extract and process text content (consider loop for multiple elements)
                        if (targetElements.length > 1) {
                            const textContent = targetElements[1].textContent; // Get first element's text
                            const trimmedContent = textContent.trim();
                            results.push(`${asin}\t\t${trimmedContent.replace(/[-_].*$/g, "")}`);
                        } else if (targetElements.length === 1){
                            const textContent = targetElements[0].textContent; // Get second element's text
                            const trimmedContent = textContent.trim();
                            results.push(`${asin}\t\t${trimmedContent.replace(/[-_].*$/g, "")}`);
                        }else {
                            results.push(`${asin}\t\t,`);
                        }

                        // Update text area after all requests are complete (consider loop completion)
                        if (results.length === asins.length) {
                            ctextarea.value = results.join("\n");
                        }
                    }
                });
            }
        });
        const copybtn = document.createElement("button");
        document.getElementById("sc-navbar-container").appendChild(copybtn);
        copybtn.textContent="copy";
        copybtn.style.cssText = 'width:100px;height:40px;border:2px dashed #ddd;';
        copybtn.addEventListener("mouseover", () => {
            copybtn.style.backgroundColor = "rgba(255, 0, 0, 0.2)";
        });
        copybtn.addEventListener("mouseout", () => {
            copybtn.style.backgroundColor = defaultBackgroundColor; // Restore default color
        });

        copybtn.addEventListener("click", () => {
            const valuetextarea = document.getElementById("juictextarea");

            // Assuming Clipboard API is supported (not recommended for production)
            navigator.clipboard.writeText(valuetextarea.value)
                .then(() => {
                console.log("Copied to clipboard!");
            })
                .catch(err => {
                console.error("Failed to copy to clipboard:", err);
            });
        });
    }})();
